# Converting README.md into a GitHub Pages Site

## Background

This guide provides a quick and precise method to convert a `README.md` file into a GitHub Pages site using Jekyll and GitHub Actions. It includes setting up necessary files to configure Jekyll, using a theme, setting up the default layout, and automating the process using GitHub Actions.

## Prerequisites

- GitHub account
- Basic knowledge of Git and Markdown
- Ruby and Bundler installed on your local machine (for local testing)

## Setup Steps

### 1. Create Repository

Create a new GitHub repository named `my-jekyll-site`.

### 2. Create Setup Script

Create a file named `setup-jekyll-site.sh` in the `.github/scripts/` directory with the following content:

<!-- .github/scripts/setup-jekyll-site.sh-start -->
```bash
#!/bin/bash
# File: setup-jekyll-site.sh

# Create Gemfile
cat <<EOF > Gemfile
source 'https://rubygems.org'

gem "jekyll"
gem "github-pages"
gem "jekyll-theme-cayman"

group :jekyll_plugins do
  gem "jekyll-sitemap"
  gem "jekyll-feed"
  gem "jekyll-seo-tag"
end
EOF

# Create _config.yml
cat <<EOF > _config.yml
title: Technical Insight
description: A precise guide providing practical, tried and tested examples.
baseurl: "/my-jekyll-site-pages" # the subpath of your site, e.g. /blog
show_downloads: true
url: "https://username.github.io" # the base hostname & protocol for your site

# Build settings
markdown: kramdown
theme: jekyll-theme-cayman

plugins:
  - jekyll-feed
  - jekyll-sitemap
  - jekyll-seo-tag
EOF

# Create default layout
mkdir -p _layouts
cat <<EOF > _layouts/default.html
<!DOCTYPE html>
<html lang="{{ site.lang | default: "en-US" }}">
<head>
  <meta charset="UTF-8">
  {% seo %}
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link rel="preload" href="https://fonts.googleapis.com/css?family=Open+Sans:400,700&display=swap" as="style" type="text/css" crossorigin>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#157878">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="stylesheet" href="{{ '/assets/css/style.css?v=' | append: site.github.build_revision | relative_url }}">
  {% include head-custom.html %}
</head>
<body>
  <a id="skip-to-content" href="#content">Skip to the content.</a>
  <header class="page-header" role="banner">
    <h1 class="project-name">{{ page.title | default: site.title | default: site.github.repository_name }}</h1>
    <h2 class="project-tagline">{{ page.description | default: site.description | default: site.github.project_tagline }}</h2>
    {% if site.github.is_project_page %}
      <a href="{{ site.github.repository_url }}" class="btn">View on GitHub</a>
    {% endif %}
    {% if site.show_downloads %}
      <a href="{{ site.github.zip_url }}" class="btn">Download .zip</a>
      <a href="{{ site.github.tar_url }}" class="btn">Download .tar.gz</a>
    {% endif %}
  </header>
  <main id="content" class="main-content" role="main">
    {{ content }}
  </main>
  <footer class="site-footer">
    {% if site.github.is_project_page %}
      <span class="site-footer-owner"><a href="{{ site.github.repository_url }}">{{ site.github.repository_name }}</a> is maintained by <a href="{{ site.github.owner_url }}">{{ site.github.owner_name }}</a>.</span>
    {% endif %}
    <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a>.</span>
  </footer>
</body>
</html>
EOF

# Copy README.md to index.md with front matter
cat <<EOF > index.md
---
layout: default
title: Docker Quick Start Guide
---
EOF
cat README.md >> index.md
```
<!-- .github/scripts/setup-jekyll-site.sh-end -->

Make the script executable:
```sh
chmod +x .github/scripts/setup-jekyll-site.sh
```

### 3. Configure GitHub Actions

Create a GitHub Actions workflow file named `gh-pages.yml` in `.github/workflows/` with the following content:
<!-- .github/workflows/gh-pages.yml-start -->
```yaml
#-------------------------------------------------------------------------------------
# Workflow for building and deploying a Jekyll site to GitHub Pages
# 1. Copy the README.md to index.md
# 2. Create Jekyll site
# 3. Deploy to GitHub Pages
#-------------------------------------------------------------------------------------

name: Deploy Jekyll site to Pages

on:
  # Runs on pushes targeting the default branch
  push:
    branches: ["main"]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages
permissions:
  contents: read
  pages: write
  id-token: write

# Allow only one concurrent deployment, skipping runs queued between the run in-progress and latest queued.
# However, do NOT cancel in-progress runs as we want to allow these production deployments to complete.
concurrency:
  group: "pages"
  cancel-in-progress: false

jobs:
  # Build job
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout
        uses: actions/checkout@v4

      - name: Setup Jekyll Site
        run: |
          .github/scripts/setup-jekyll-site.sh
          cat _config.yml
          cat _layouts/default.html
          cat Gemfile
          cat index.md

      - name: Setup Ruby
        uses: ruby/setup-ruby@v1
        with:
          ruby-version: '3.1' # Not needed with a .ruby-version file
          bundler-cache: true # runs 'bundle install' and caches installed gems automatically
          cache-version: 0 # Increment this number if you need to re-download cached gems

      - name: Setup Pages
        id: pages
        uses: actions/configure-pages@v5

      - name: Build with Jekyll
        # Outputs to the './_site' directory by default
        run: bundle exec jekyll build --baseurl "${{ steps.pages.outputs.base_path }}"
        env:
          JEKYLL_ENV: production

      - name: Debug Jekyll Build
        run: |
          echo "Listing files in the root directory:"
          ls -al
          echo "Listing files in the _site directory:"
          ls -al _site

      - name: Upload artifact
        # Automatically uploads an artifact from the './_site' directory by default
        uses: actions/upload-pages-artifact@v3

  # Deployment job
  deploy:
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
    runs-on: ubuntu-latest
    needs: build
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```
<!-- .github/workflows/gh-pages.yml-end -->

### 4. Test Locally

To test the site locally with the `baseurl` set:

1. Build the site:

```sh
bundle exec jekyll build --baseurl="/my-jekyll-site"
```

2. Serve the site:

```sh
bundle exec jekyll serve --baseurl="/my-jekyll-site"
```

Open your browser and go to `http://localhost:4000/my-jekyll-site/` to verify.

### 5. Deploy to GitHub Pages

1. Commit and push your changes to the `main` branch:

```sh
git add .
git commit -m "Set up Jekyll site with GitHub Actions"
git push origin main
```

2. Go to your repository settings on GitHub, navigate to "Pages" under "Code and automation," and ensure the Source under "GitHub Pages" - "Build and Deployment" is set to "GitHub Actions.

Your site should now be live at `https://username.github.io/my-jekyll-site`.

## Additional Customizations

Feel free to customize your Jekyll site by editing the `_config.yml`, adding new pages, and modifying the styles in `assets/css/style.scss`. 

To add custom styles, create `assets/css/style.scss` with the following content:

```scss
---
---

@import "{{ site.theme }}";

// Your custom styles go here
body {
    background-color: #f0f0f0;
    font-family: Arial, sans-serif;
}
```

## References

- [Jekyll Documentation](https://jekyllrb.com/docs/)
- [GitHub Pages Documentation](https://docs.github.com/en/pages)
- [GitHub Actions Documentation](https://docs.github.com/en/actions)

By following these steps, any changes made to README.md in your repository will automatically be reflected on your GitHub Pages site. This GitHub Actions workflow can also be enhanced to publish README.md as content or a blog on other websites, if desired. This approach saves time by automating the publication process across multiple platforms and simplifies the management of your blog content.
